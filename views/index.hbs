<h1>{{title}}</h1>
<ul id="messages">
</ul>
<form id="message-input">
	<input id="msg" autocomplete="off" /><button>Send</button>
</form>
<form id="auth">
	<input id="username"/>
	<input id="password"/>
	<button>login</button>
</form>
<script src="/socket.io/socket.io.js"></script>
<script>
	var socket = io();
	$("#message-input").submit(event=>{
		event.preventDefault();
		let msg = $('#msg');
		socket.emit('chat message', msg.val());
		msg.val('');
		return false;
	});
	socket.on('new message', msg => {
		$("#messages").append($('<li>').text(msg));
	});
	$('#auth').submit(event=>{
		event.preventDefault();
		let combo = {'user': $('#username').val(), 'pass': $('#password').val()};
		socket.emit('auth', combo);
		return false;
	});
	socket.on('token', token => {
		console.log(token);
	});
</script>